describe('Vulnerability Research', () => {
    beforeEach(() => cy.visit('assignment/vulnerability.html'));

    const sections = ['team', 'definition', 'targets', 'cases', 'examples', 'protection'];

    sections.forEach(sectionId => {
        it(`should have non-empty content in #${sectionId} section`, () => {
            cy.get(`#${sectionId}`)
                .should('exist')
                .then($section => {
                    expect($section.text().trim()).not.to.be.empty;
                });
        });
        it(`should have h2 header in #${sectionId} section`, () => {
            cy.get(`#${sectionId}`)
                .should('exist')
                .then($section => {
                    expect($section.find('h2').length).to.be.at.least(1, `#${sectionId} should have at least one h2 header`);
                });
        });
    });
    it('should have alt attributes on all images (if any exist)', () => {
        cy.get('body').then(($body) => {
            if ($body.find('img').length > 0) {
                cy.get('img').each($img => {
                    cy.wrap($img)
                        .should('have.attr', 'alt')
                        .and('not.be.empty');
                });
            } else {
                cy.log('No images found - skipping alt attribute test');
            }
        });
    });
});